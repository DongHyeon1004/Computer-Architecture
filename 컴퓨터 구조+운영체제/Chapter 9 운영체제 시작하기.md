# 운영체제 시작하기

# 운영체제란?

**시스템 자원(자원)** : 프로그램 실행에 마땅히 필요한 요소들

ex) CPU, 메모리, 보조기억장치 등 모든 컴퓨터 부품들

**운영체제** : 실행할 프로그램에 자원을 할당하고, 프로그램이 올바르게 실행되도록 돕는 특별한 프로그램. 

**커널 영역** : 컴퓨터 부팅 시 운영체제가 적재되는 메모리 내 공간

**사용자 영역** : 커널 영역을 제외한 나머지 영역. 사용자가 이용하는 응용 프로그램이 적재되는 영역

![Untitled](https://github.com/DongHyeon1004/Computer-Architecture-Operating-System/blob/main/%EC%BB%B4%ED%93%A8%ED%84%B0%20%EA%B5%AC%EC%A1%B0%2B%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/image/9-1.png)

**운영체제의 역할**

응용 프로그램과 하드웨어 사이에서 응용 프로그램에 필요한 자원을 할당하고, 응용 프로그램이 올바르게 실행되도록 관리하는 역할을 함.

ex)

- 응용 프로그램들을 메모리 주소가 겹치지 않도록 메모리에 적재함.
- 어느 한 프로그램이 CPU를 독점하면 다른 프로그램들은 올바르게 실행될 수 없기 때문에 운영체제는 최대한 공정하게 여러 프로그램에 CPU 자원을 할당함.
- 동시에 두 개의 프로그램이 프린터를 사용하지 못하도록 막고, 하나의 프로그램이 프린터를 이용하는 동안 다른 프로그램은 기다리게 만들어 프린터 자원을 관리.
- 응용 프로그램에 자원을 효율적으로 배분하고, 실행할 프로그램들이 지켜야 할 규칙을 만들어 컴퓨터 시스템 전체를 관리.

---

# 운영체제를 알아야 하는 이유

- 운영체제는 프로그램이기에 소통이 가능하다. 운영체제는 현재 하드웨어의 상태는 어떠한지, 코드가 어떻게 실행됐는지, 하드웨어 상에 어떤 문제가 있는지 등 우리에게 상세히 알려줄 수 있고, 이를 통해 **문제해결의 실마리를 찾을 수 있다.**
- 운영체제를 깊이 이해하면 운영체제에 제대로 명령할 수 있게 되고, 결과적으로 하드웨어와 프로그램을 더 깊이 이해할 수 있다.

---

# 운영체제의 심장, 커널

**커널** : 자원에 접근하고 조작하는 기능, 프로그램이 올바르고 안전하게 실행되게 하는 기능인 운영체제의 핵심 서비스를 담당하는 부분

- 운영체제가 설치된 모든 기기에는 커널이 있다.
- 어떤 커널을 사용하는지에 따라 실행하고 개발하는 프로그램이 하드웨어를 이용하는 양상이 달라지고, 컴퓨터 전체의 성능도 달라질 수 있다.

![Untitled](https://github.com/DongHyeon1004/Computer-Architecture-Operating-System/blob/main/%EC%BB%B4%ED%93%A8%ED%84%B0%20%EA%B5%AC%EC%A1%B0%2B%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/image/9-2.png)

**커널에 포함되지 않는 서비스**

**사용자 인터페이스(UI : User Interface)** : 윈도우의 바탕화면 같이 사용자가 컴퓨터와 상호작용 할 수 있는 통로

- **그래픽 유저 인터페이스(GUI : Graphical User Interface)** : 윈도우 바탕화면이나 스마트폰의 화면 처럼 그래픽을 기반으로 컴퓨터와 상호작용 할 수 있는 인터페이스
- **커맨드 라인 인터페이스(CLI : Command Line Interface)** : 명령어를 기반으로 컴퓨터와 상호작용 할 수 있는 인터페이스

컴퓨터와 상호작용하기 위한 통로일 뿐 커널에 속한 기능은 아니고, 같은 커널을 사용하더라도 사용자 인터페이스는 다를 수 있다.

---

# 이중 모드와 시스템 호출

운영체제는 응용 프로그램이 자원에 접근하려고 할 때 오직 자신을 통해서만 접근하도록 하여 자원을 보호한다.

응용 프로그램이 자원에 접근하기 위해서는 운영체제에 도움을 요청하고, 요청을 받은 운영체제는 응용 프로그램 대신 자원에 접근하여 요청한 작업을 수행한다.

![Untitled](https://github.com/DongHyeon1004/Computer-Architecture-Operating-System/blob/main/%EC%BB%B4%ED%93%A8%ED%84%B0%20%EA%B5%AC%EC%A1%B0%2B%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/image/9-3.png)

**이중 모드(dual mode)** : CPU가 명령어를 실행하는 모드를 크게 사용자 모드와 커널 모드로 구분하는 방식

- **사용자 모드(user mode)** : 운영체제 서비스를 제공 받을 수 없는 실행 모드. 커널 영역의 코드를 실행할 수 없는 모드
    - 일반적인 응용 프로그램은 기본적으로 사용자 모드로 실행
    - 사용자 모드로 실행 중인 CPU는 하드웨어 자원에 접근하는 명령어를 실행할 수 없다.
    - 사용자 모드로 실행되는 일반적인 응용 프로그램은 자원에 접근할 수 없다.
    
- **커널 모드(kernel mode)** : 운영체제 서비스를 제공 받을 수 있는 실행 모드. 커널 영역의 코드를 실행할 수 있는 모드
    - CPU가 커널 모드로 명령어를 실행하면 자원에 접근하는 명령어를 비롯한 모든 명령어를 실행 할 수 있다.
    - 운영체제는 커널 모드로 실행되기 때문에 자원에 접근 할 수 있다.

**시스템 호출(system call)** : 사용자 모드로 실행되는 프로그램이 자원에 접근하는 운영체제 서비스를 제공 받기 위해 커널 모드로 전환하는 요청

- 사용자 모드로 실행되는 프로그램은 시스템 호출을 통해 커널 모드로 전환하여 운영체제 서비스를 제공 받을 수 있다.
- 시스템 호출은 일종의 소프트웨어적인 인터럽트다.
- **소프트웨어 인터럽트** : 인터럽트를 발생시키는 특정 명령어에 의해 발생하는 인터럽트

---

# 운영체제의 핵심 서비스

1. **프로세스 관리**
    
    **프로세스** : 실행 중인 프로그램
    
    일반적으로 하나의 CPU는 한 번에 하나의 프로세스만 실행할 수 있기 때문에 CPU는 이 프로세스들을 조금씩 번갈아 가며 실행한다.
    
2. **자원 접근 및 할당**
    1. **CPU**
        
        일반적으로 메모리에는 여러 프로세스가 적재되고 하나의 CPU는 한 번에 하나의 프로세스만 실행할 수 있다.
        
        CPU 스케줄링 : 운영체제가 프로세스들에게 공정하게 CPU를 할당하기 위해 어떤 프로세스부터 CPU를 이용하게 할 것인지, 얼마나 오래 CPU를 이용하게 할지 결정하기 위한 방법
        
    2. **메모리**
        
        메모리에 적재된 프로세스들은 크기도, 주소도 가지각색이다.
        
        같은 프로세스일지라도 실행할 때마다 적재되는 주소가 달라질 수 있다.
        
        운영체제는 새로운 프로세스가 적재될 때마다 어느 주소에 적재해야 할지를 결정해야 한다.
        
    3. **입출력장치**
        
        인터럽트 서비스 루틴은 운영체제가 제공하는 기능이고 커널 영역에 존재한다.
        
    
3. **파일 시스템 관리**
    
    운영체제는 파일들을 한데 묶어 디렉터리(폴더)로 관리한다.
